<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!--
        Entity Share Expiry Notification Cron Jobs

        These cron jobs handle automatic notifications and cleanup for
        ha.entity.share records with expiration dates.
        -->

        <!-- Daily: Check for shares expiring within 7 days -->
        <record id="cron_check_expiring_shares" model="ir.cron">
            <field name="name">Check Expiring Entity Shares</field>
            <field name="model_id" ref="model_ha_entity_share"/>
            <field name="state">code</field>
            <field name="code">model._cron_check_expiring_shares()</field>
            <field name="interval_number">1</field>
            <field name="interval_type">days</field>
            <field name="active" eval="True"/>
            <field name="user_id" ref="base.user_root"/>
        </record>

        <!-- Weekly: Clean up shares expired more than 30 days ago -->
        <record id="cron_cleanup_expired_shares" model="ir.cron">
            <field name="name">Cleanup Expired Entity Shares</field>
            <field name="model_id" ref="model_ha_entity_share"/>
            <field name="state">code</field>
            <field name="code">model._cron_cleanup_expired_shares()</field>
            <field name="interval_number">7</field>
            <field name="interval_type">days</field>
            <field name="active" eval="True"/>
            <field name="user_id" ref="base.user_root"/>
        </record>

        <!--
        Notes:
        - interval_number + interval_type: Execution frequency
        - active: Whether the cron job is enabled
        - user_id: The user context for execution (root for system tasks)

        _cron_check_expiring_shares():
        - Runs daily
        - Finds shares expiring within 7 days
        - Creates mail.activity notifications for share creators
        - Marks notification_sent = True to avoid duplicates

        _cron_cleanup_expired_shares():
        - Runs weekly
        - Removes shares that expired more than 30 days ago
        - Helps keep the database clean
        -->

    </data>
</odoo>
