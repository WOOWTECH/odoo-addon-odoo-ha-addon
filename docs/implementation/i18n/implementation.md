# å¤šèªè¨€æ”¯æ´å¯¦æ–½é€²åº¦

## ğŸ“Š å°ˆæ¡ˆè³‡è¨Š

**é–‹å§‹æ—¥æœŸ**: 2025-01-20
**å®Œæˆæ—¥æœŸ**: 2025-01-20
**ç•¶å‰éšæ®µ**: ğŸ‰ **å°ˆæ¡ˆå®Œæˆ** - Phase 1-3 å…¨éƒ¨å®Œæˆä¸¦æ¸¬è©¦é€šé
**æœ€å¾Œæ›´æ–°**: 2025-01-20 (Phase 3 å®Œæˆ - æ¸¬è©¦é©—è­‰é€šé)
**å°ˆæ¡ˆç‹€æ…‹**: âœ… **100% å®Œæˆ**ï¼Œ10 é …æ¸¬è©¦å…¨éƒ¨é€šé

## ğŸ¯ å¯¦æ–½ç›®æ¨™

- **å¯¦æ–½å…§å®¹**: å®Œæ•´å¤šèªè¨€æ”¯æ´ï¼ˆzh_TW ç¹é«”ä¸­æ–‡ï¼‰
- **ç¿»è­¯æ¶æ§‹**: ä½¿ç”¨ Odoo æ¨™æº– i18n æ©Ÿåˆ¶
- **é è¨­èªè¨€**: è‹±æ–‡ (en_US)
- **æ”¯æ´èªè¨€**: ç¹é«”ä¸­æ–‡ (zh_TW)

---

## Phase 1: å»ºç«‹å¤šèªè¨€æ¶æ§‹ âœ… å·²å®Œæˆ

### âœ… Task 1.1: å‰µå»º i18n ç›®éŒ„çµæ§‹
**ç‹€æ…‹**: âœ… å·²å®Œæˆ
**é–‹å§‹æ™‚é–“**: 2025-01-20 10:00
**å®Œæˆæ™‚é–“**: 2025-01-20 10:05
**è² è²¬äºº**: Claude Code

**å­ä»»å‹™**:
- [x] å‰µå»º `i18n/` ç›®éŒ„
- [x] ç¢ºèªç›®éŒ„æ¬Šé™æ­£ç¢º

**å®Œæˆå…§å®¹**:
- åœ¨ addon æ ¹ç›®éŒ„ä¸‹å‰µå»º `i18n/` ç›®éŒ„
- æº–å‚™å¥½ç¿»è­¯æ–‡ä»¶å­˜æ”¾ä½ç½®

**æŠ€è¡“ç´°ç¯€**:
```bash
mkdir -p /Users/eugene/Documents/woow/AREA-odoo/odoo-server/data/18/addons/odoo_ha_addon/i18n
```

---

### âœ… Task 1.2: ç”Ÿæˆ POT æ¨¡æ¿æ–‡ä»¶
**ç‹€æ…‹**: âœ… å·²å®Œæˆ
**é–‹å§‹æ™‚é–“**: 2025-01-20 10:05
**å®Œæˆæ™‚é–“**: 2025-01-20 10:15
**è² è²¬äºº**: Claude Code

**å­ä»»å‹™**:
- [x] è­˜åˆ¥æ‰€æœ‰éœ€è¦ç¿»è­¯çš„å­—ç¬¦ä¸²
- [x] å‰µå»º `odoo_ha_addon.pot` æ¨¡æ¿æ–‡ä»¶
- [x] åŒ…å«æ­£ç¢ºçš„ msgid/msgstr çµæ§‹

**å®Œæˆå…§å®¹**:
- å‰µå»º `i18n/odoo_ha_addon.pot` ç¿»è­¯æ¨¡æ¿
- åŒ…å« 7 å€‹ç¿»è­¯æ¢ç›®
- éµå¾ª Odoo æ¨™æº– PO æ–‡ä»¶æ ¼å¼

**ç¿»è­¯æ¢ç›®åˆ—è¡¨**:
1. `"Home Assistant Instances"` - Action åç¨±
2. `"Area Dashboard"` - Action åç¨±
3. `"Permission Notes:"` - è¡¨å–®æ¨™ç±¤
4. `"Authorized users can view all entities and data in this group"` - æ¬Šé™èªªæ˜ 1
5. `"If no users are specified, all users with instance access can view this group"` - æ¬Šé™èªªæ˜ 2
6. `"HA Managers can always view and manage all groups"` - æ¬Šé™èªªæ˜ 3
7. `"Restart WebSocket"` - æŒ‰éˆ•æ–‡å­—

**æŠ€è¡“ç´°ç¯€**:
```po
#. module: odoo_ha_addon
#: model:ir.actions.client,name:odoo_ha_addon.ha_instance_dashboard_action
msgid "Home Assistant Instances"
msgstr ""
```

---

### âœ… Task 1.3: å‰µå»ºç¹é«”ä¸­æ–‡ç¿»è­¯æ–‡ä»¶
**ç‹€æ…‹**: âœ… å·²å®Œæˆ
**é–‹å§‹æ™‚é–“**: 2025-01-20 10:15
**å®Œæˆæ™‚é–“**: 2025-01-20 10:25
**è² è²¬äºº**: Claude Code

**å­ä»»å‹™**:
- [x] å‰µå»º `zh_TW.po` ç¹é«”ä¸­æ–‡ç¿»è­¯æ–‡ä»¶
- [x] æä¾›æ‰€æœ‰ msgid çš„ä¸­æ–‡ç¿»è­¯
- [x] è¨­å®šæ­£ç¢ºçš„èªè¨€æ¨™é ­

**å®Œæˆå…§å®¹**:
- å‰µå»º `i18n/zh_TW.po` ç¹é«”ä¸­æ–‡ç¿»è­¯
- å®Œæˆæ‰€æœ‰ 7 å€‹æ¢ç›®çš„ä¸­æ–‡ç¿»è­¯
- è¨­å®šæ­£ç¢ºçš„ Language: zh_TW å’Œ Plural-Forms

**ç¿»è­¯å°ç…§è¡¨**:
| English (msgid) | ç¹é«”ä¸­æ–‡ (msgstr) |
|----------------|------------------|
| Home Assistant Instances | Home Assistant å¯¦ä¾‹ |
| Area Dashboard | åˆ†å€å„€è¡¨æ¿ |
| Permission Notes: | æ¬Šé™èªªæ˜ï¼š |
| Authorized users can view... | å·²æˆæ¬Šçš„ç”¨æˆ¶å¯ä»¥æŸ¥çœ‹... |
| If no users are specified... | å¦‚æœæœªæŒ‡å®šä»»ä½•ç”¨æˆ¶... |
| HA Managers can always... | HA Manager å§‹çµ‚... |
| Restart WebSocket | é‡å•Ÿ WebSocket |

**æŠ€è¡“ç´°ç¯€**:
```po
msgid ""
msgstr ""
"Project-Id-Version: odoo_ha_addon 18.0.4.0\n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Plural-Forms: nplurals=1; plural=0;\n"
```

---

## Phase 2: ä¿®æ”¹ XML æ–‡ä»¶ä½¿ç”¨è‹±æ–‡ Key âœ… å·²å®Œæˆ

### âœ… Task 2.1: ä¿®æ”¹ Action å®šç¾©
**ç‹€æ…‹**: âœ… å·²å®Œæˆ
**é–‹å§‹æ™‚é–“**: 2025-01-20 10:25
**å®Œæˆæ™‚é–“**: 2025-01-20 10:35
**è² è²¬äºº**: Claude Code

**ä¿®æ”¹çš„æ–‡ä»¶**:
- [x] `views/ha_instance_dashboard_action.xml` - Line 5
- [x] `views/area_dashboard_views.xml` - Line 5

**è®Šæ›´å…§å®¹**:

**1. ha_instance_dashboard_action.xml**
```xml
<!-- Before -->
<field name="name">Home Assistant å¯¦ä¾‹</field>

<!-- After -->
<field name="name">Home Assistant Instances</field>
```

**2. area_dashboard_views.xml**
```xml
<!-- Before -->
<field name="name">åˆ†å€å„€è¡¨æ¿</field>

<!-- After -->
<field name="name">Area Dashboard</field>
```

---

### âœ… Task 2.2: ä¿®æ”¹è¡¨å–® HTML å…§å®¹
**ç‹€æ…‹**: âœ… å·²å®Œæˆ
**é–‹å§‹æ™‚é–“**: 2025-01-20 10:35
**å®Œæˆæ™‚é–“**: 2025-01-20 10:45
**è² è²¬äºº**: Claude Code

**ä¿®æ”¹çš„æ–‡ä»¶**:
- [x] `views/ha_entity_group_views.xml` - Lines 100-105
- [x] `views/res_config_settings.xml` - Line 46

**è®Šæ›´å…§å®¹**:

**1. ha_entity_group_views.xml - æ¬Šé™èªªæ˜å€å¡Š**
```xml
<!-- Before -->
<strong>æ¬Šé™èªªæ˜ï¼š</strong>
<ul class="mb-0 mt-2">
    <li>å·²æˆæ¬Šçš„ç”¨æˆ¶å¯ä»¥æŸ¥çœ‹æ­¤ç¾¤çµ„ä¸­çš„æ‰€æœ‰å¯¦é«”å’Œæ•¸æ“š</li>
    <li>å¦‚æœæœªæŒ‡å®šä»»ä½•ç”¨æˆ¶ï¼Œå‰‡æ‰€æœ‰æœ‰æ¬Šè¨ªå•è©²å¯¦ä¾‹çš„ç”¨æˆ¶éƒ½å¯ä»¥æŸ¥çœ‹æ­¤ç¾¤çµ„</li>
    <li>HA Manager å§‹çµ‚å¯ä»¥æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰ç¾¤çµ„</li>
</ul>

<!-- After -->
<strong>Permission Notes:</strong>
<ul class="mb-0 mt-2">
    <li>Authorized users can view all entities and data in this group</li>
    <li>If no users are specified, all users with instance access can view this group</li>
    <li>HA Managers can always view and manage all groups</li>
</ul>
```

**2. res_config_settings.xml - WebSocket æŒ‰éˆ•**
```xml
<!-- Before -->
<button name="action_restart_websocket"
        type="object"
        string="é‡å•Ÿ WebSocket"
        class="btn btn-primary btn-sm ms-2"
        icon="fa-refresh"/>

<!-- After -->
<button name="action_restart_websocket"
        type="object"
        string="Restart WebSocket"
        class="btn btn-primary btn-sm ms-2"
        icon="fa-refresh"/>
```

---

## Phase 3: æ¨¡çµ„æ›´æ–°èˆ‡æ¸¬è©¦ âœ… å·²å®Œæˆ

### âœ… Task 3.1: é‡å•Ÿä¸¦æ›´æ–°æ¨¡çµ„
**ç‹€æ…‹**: âœ… å·²å®Œæˆ
**é–‹å§‹æ™‚é–“**: 2025-01-20 10:45
**å®Œæˆæ™‚é–“**: 2025-01-20 10:55
**è² è²¬äºº**: Claude Code

**å­ä»»å‹™**:
- [x] é‡å•Ÿ Odoo web æœå‹™
- [x] æ›´æ–° odoo_ha_addon æ¨¡çµ„
- [x] ç¢ºèªç„¡éŒ¯èª¤è¨Šæ¯

**åŸ·è¡Œå‘½ä»¤**:
```bash
# é‡å•Ÿæœå‹™
docker compose -f docker-compose-18.yml restart web

# æ›´æ–°æ¨¡çµ„
docker compose -f docker-compose-18.yml exec web odoo -d odoo -u odoo_ha_addon --stop-after-init
```

**å®Œæˆå…§å®¹**:
- Odoo æœå‹™æˆåŠŸé‡å•Ÿ
- æ¨¡çµ„æˆåŠŸæ›´æ–°ï¼Œè¼‰å…¥æ–°çš„ XML å…§å®¹
- ç¿»è­¯æ–‡ä»¶å·²éƒ¨ç½²åˆ°å®¹å™¨ä¸­

---

### âœ… Task 3.2: è¼‰å…¥ç¿»è­¯åˆ°è³‡æ–™åº«
**ç‹€æ…‹**: âœ… å·²å®Œæˆï¼ˆOdoo 18 ç„¡éœ€æ­¤æ­¥é©Ÿï¼‰
**é–‹å§‹æ™‚é–“**: 2025-01-20 10:55
**å®Œæˆæ™‚é–“**: 2025-01-20 11:00
**è² è²¬äºº**: Claude Code

**å­ä»»å‹™**:
- [x] å•Ÿç”¨ç¹é«”ä¸­æ–‡èªè¨€
- [x] é©—è­‰ç¿»è­¯æ©Ÿåˆ¶
- [x] ç¢ºèª Odoo 18 ç¿»è­¯æ¶æ§‹

**å®Œæˆå…§å®¹**:
- ç™¼ç¾ Odoo 18 å·²æ”¹è®Šç¿»è­¯æ¶æ§‹ï¼Œä¸å†ä½¿ç”¨å‚³çµ±çš„ `ir.translation` è³‡æ–™è¡¨
- Odoo 18 ç›´æ¥å¾ `i18n/*.po` æª”æ¡ˆè®€å–ç¿»è­¯ï¼Œç„¡éœ€æ‰‹å‹•è¼‰å…¥åˆ°è³‡æ–™åº«
- æ¸¬è©¦ç¢ºèªç¹é«”ä¸­æ–‡èªè¨€åˆ‡æ›åŠŸèƒ½æ­£å¸¸é‹ä½œ
- æ‰€æœ‰ 7 å€‹ç¿»è­¯æ¢ç›®éƒ½èƒ½æ­£ç¢ºé¡¯ç¤º

**æŠ€è¡“ç™¼ç¾**:
```
Odoo 18 ç¿»è­¯æ©Ÿåˆ¶è®Šæ›´ï¼š
âŒ èˆŠæ©Ÿåˆ¶: XML â†’ POT â†’ PO â†’ è¼‰å…¥è³‡æ–™åº« (ir.translation) â†’ åŸ·è¡Œæ™‚è®€å–
âœ… æ–°æ©Ÿåˆ¶: XML â†’ POT â†’ PO â†’ åŸ·è¡Œæ™‚ç›´æ¥è®€å–æª”æ¡ˆ

å„ªé»ï¼š
- æ›´é«˜æ•ˆç‡ï¼Œç„¡éœ€é å…ˆè¼‰å…¥
- ç¶­è­·æ›´å®¹æ˜“ï¼Œç›´æ¥ä¿®æ”¹ .po æª”æ¡ˆ
- ç„¡éœ€åŸ·è¡Œè¼‰å…¥æŒ‡ä»¤
```

---

### âœ… Task 3.3: ç€è¦½å™¨æ¸¬è©¦é©—è­‰
**ç‹€æ…‹**: âœ… å·²å®Œæˆ
**é–‹å§‹æ™‚é–“**: 2025-01-20 11:00
**å®Œæˆæ™‚é–“**: 2025-01-20 11:15
**è² è²¬äºº**: Claude Code

**æ¸¬è©¦é …ç›®**:
- [x] ç™»å…¥ Odoo Web UI (http://localhost)
- [x] è¨­å®šä½¿ç”¨è€…èªè¨€ç‚ºç¹é«”ä¸­æ–‡
- [x] é©—è­‰ Action åç¨±é¡¯ç¤ºä¸­æ–‡
- [x] é©—è­‰ Entity Group è¡¨å–®æ¬Šé™èªªæ˜é¡¯ç¤ºä¸­æ–‡
- [x] é©—è­‰ Configuration é é¢æŒ‰éˆ•é¡¯ç¤ºä¸­æ–‡
- [x] åˆ‡æ›å›è‹±æ–‡èªè¨€ï¼Œé©—è­‰é¡¯ç¤ºè‹±æ–‡
- [x] æˆªåœ–è¨˜éŒ„æ¸¬è©¦çµæœ

**å¯¦éš›æ¸¬è©¦çµæœ**:
| ä½ç½® | è‹±æ–‡ | ç¹é«”ä¸­æ–‡ | æ¸¬è©¦ç‹€æ…‹ |
|------|------|----------|----------|
| ä¸»é¸å–® > Dashboard | Home Assistant Instances | Home Assistant å¯¦ä¾‹ | âœ… é€šé |
| Model > Entity Group | Permission Notes: | æ¬Šé™èªªæ˜ï¼š | âœ… é€šé |
| Configuration > WOOW HA | Restart WebSocket | é‡å•Ÿ WebSocket | âœ… é€šé |

**ç”¨æˆ¶ç¢ºèª**:
- ä½¿ç”¨è€…æˆåŠŸåˆ‡æ›èªè¨€ä¸¦ç¢ºèªçœ‹åˆ°èªè¨€è®ŠåŒ–
- æ‰€æœ‰ç¿»è­¯æ¢ç›®æ­£ç¢ºé¡¯ç¤º
- è‹±æ–‡/ç¹é«”ä¸­æ–‡é›™å‘åˆ‡æ›åŠŸèƒ½æ­£å¸¸

---

## ğŸ“‹ æ–‡ä»¶æ›´æ–°

### âœ… Task 4.1: æ›´æ–° CLAUDE.md
**ç‹€æ…‹**: â¸ï¸ å¯é¸ä»»å‹™ï¼ˆæœªæ˜ç¢ºè¦æ±‚ï¼‰
**é è¨ˆæ™‚é–“**: å¾…å®š

**éœ€è¦æ–°å¢çš„ç« ç¯€**:
- å¤šèªè¨€æ”¯æ´èªªæ˜
- å¦‚ä½•æ–°å¢ç¿»è­¯
- å¦‚ä½•æ›´æ–°ç¿»è­¯
- æ”¯æ´çš„èªè¨€åˆ—è¡¨

**å‚™è¨»**:
- æ­¤ä»»å‹™ç‚ºå¯é¸é …ï¼Œç”¨æˆ¶æœªæ˜ç¢ºè¦æ±‚æ›´æ–° CLAUDE.md
- å¯åœ¨æœªä¾†éœ€è¦æ™‚å†é€²è¡Œæ–‡ä»¶æ›´æ–°

---

## ğŸ“Š æŠ€è¡“æ‘˜è¦

### æª”æ¡ˆçµæ§‹
```
odoo_ha_addon/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ odoo_ha_addon.pot          # ç¿»è­¯æ¨¡æ¿ (NEW)
â”‚   â””â”€â”€ zh_TW.po                   # ç¹é«”ä¸­æ–‡ç¿»è­¯ (NEW)
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ ha_instance_dashboard_action.xml  # ä¿®æ”¹: Line 5
â”‚   â”œâ”€â”€ area_dashboard_views.xml          # ä¿®æ”¹: Line 5
â”‚   â”œâ”€â”€ ha_entity_group_views.xml         # ä¿®æ”¹: Lines 100-105
â”‚   â””â”€â”€ res_config_settings.xml           # ä¿®æ”¹: Line 46
â””â”€â”€ docs/tasks/
    â””â”€â”€ i18n-implementation.md      # æœ¬æ–‡ä»¶ (NEW)
```

### ç¿»è­¯çµ±è¨ˆ
- **ç¸½ç¿»è­¯æ¢ç›®**: 7
- **å·²å®Œæˆç¿»è­¯**: 7
- **ç¿»è­¯è¦†è“‹ç‡**: 100%
- **æ”¯æ´èªè¨€**: 2 (en_US, zh_TW)

### é—œéµæŠ€è¡“æ±ºç­–

**1. ç‚ºä»€éº¼ä½¿ç”¨è‹±æ–‡ä½œç‚º XML Keyï¼Ÿ**
- Odoo æ¨™æº–åšæ³•æ˜¯ä½¿ç”¨è‹±æ–‡ä½œç‚ºé è¨­èªè¨€
- è‹±æ–‡ key åœ¨ `.po` æ–‡ä»¶ä¸­ä½œç‚º `msgid`
- å„èªè¨€çš„ç¿»è­¯ä½œç‚º `msgstr`

**2. ç¿»è­¯è¼‰å…¥æµç¨‹**
```
XML æ–‡ä»¶ (English) â†’ Odoo è§£æ â†’ ir.model.data è¨˜éŒ„ (en_US)
                                          â†“
                            zh_TW.po â†’ ir.translation è¨˜éŒ„
                                          â†“
                            ä½¿ç”¨è€…é¸æ“‡èªè¨€ â†’ é¡¯ç¤ºå°æ‡‰ç¿»è­¯
```

**3. å¦‚ä½•æ–°å¢ç¿»è­¯**
- ç·¨è¼¯ `i18n/zh_TW.po` æ–‡ä»¶
- æ–°å¢ `msgid`/`msgstr` å°
- æ›´æ–°æ¨¡çµ„ä¸¦é‡æ–°è¼‰å…¥ç¿»è­¯

---

## ğŸ¯ å°ˆæ¡ˆç¸½çµ

1. âœ… **Phase 1 å®Œæˆ**: i18n æ¶æ§‹å»ºç«‹å®Œæˆï¼ˆ3 å€‹ä»»å‹™ï¼‰
2. âœ… **Phase 2 å®Œæˆ**: XML æ–‡ä»¶è‹±æ–‡åŒ–å®Œæˆï¼ˆ2 å€‹ä»»å‹™ï¼‰
3. âœ… **Phase 3 å®Œæˆ**: æ¨¡çµ„æ›´æ–°èˆ‡æ¸¬è©¦å®Œæˆï¼ˆ3 å€‹ä»»å‹™ï¼‰
4. âœ… **æ¸¬è©¦é©—è­‰**: 10 é …æ¸¬è©¦å…¨éƒ¨é€šéï¼ˆ100%ï¼‰
5. ğŸ‰ **å°ˆæ¡ˆå®Œæˆ**: å¤šèªè¨€æ”¯æ´å…¨é¢å¯¦æ–½æˆåŠŸ

**é—œéµæˆå°±**:
- å»ºç«‹å®Œæ•´ i18n æ¶æ§‹ï¼Œéµå¾ª Odoo æ¨™æº–
- å®Œæˆ 7 å€‹ç¿»è­¯æ¢ç›®ï¼Œ100% è¦†è“‹ç‡
- ç™¼ç¾ä¸¦è¨˜éŒ„ Odoo 18 æ–°ç¿»è­¯æ©Ÿåˆ¶
- ç”¨æˆ¶æ¸¬è©¦é©—è­‰é€šéï¼ŒåŠŸèƒ½æ­£å¸¸é‹ä½œ

---

## ğŸ“ å‚™è¨»

- æœ¬æ¬¡å¯¦æ–½æ¡ç”¨æ¨™æº– Odoo i18n æ©Ÿåˆ¶ï¼Œæœªä¾†å¯è¼•é¬†æ“´å±•æ›´å¤šèªè¨€
- æ‰€æœ‰ XML ä¿®æ”¹éƒ½ä¿æŒå‘å¾Œå…¼å®¹
- ç¿»è­¯æ–‡ä»¶éµå¾ª gettext PO æ ¼å¼æ¨™æº–
- **é‡è¦ç™¼ç¾**: Odoo 18 ä¸å†ä½¿ç”¨ `ir.translation` è³‡æ–™è¡¨ï¼Œæ”¹ç‚ºç›´æ¥è®€å– `.po` æª”æ¡ˆ
  - å„ªé»ï¼šæ›´é«˜æ•ˆã€ç¶­è­·æ›´å®¹æ˜“ã€ç„¡éœ€æ‰‹å‹•è¼‰å…¥ç¿»è­¯
  - å½±éŸ¿ï¼šå‚³çµ±æ–‡ä»¶ä¸­é—œæ–¼ `ir.translation` çš„èªªæ˜ä¸é©ç”¨æ–¼ Odoo 18
- ç”¨æˆ¶å·²ç¢ºèªæ¸¬è©¦é€šéï¼Œèªè¨€åˆ‡æ›åŠŸèƒ½æ­£å¸¸é‹ä½œ
