---
name: 升級 Portal Entity Card 卡片樣式
status: closed
created: 2026-01-08T17:23:27Z
updated: 2026-01-08T23:40:17Z
github: https://github.com/WOOWTECH/odoo-addons/issues/13
depends_on: [12]
parallel: true
conflicts_with: [003, 004, 005]
---

# Task: 升級 Portal Entity Card 卡片樣式

## Description

重新設計 `.portal-entity-card` 卡片元件，使用 CSS Custom Properties 實現現代化的 IoT 設備卡片視覺風格，包括圓角、陰影、hover 效果等。

## Acceptance Criteria

- [ ] 卡片使用 CSS 變數定義背景、邊框、陰影
- [ ] 圓角從 0.5rem 升級為 12-16px
- [ ] 添加 hover 時的 lift 效果（transform + shadow）
- [ ] Header 區塊有圖示和狀態 Badge 區域
- [ ] 深色模式下卡片視覺正確
- [ ] 卡片內文字對比度符合 WCAG AA

## Technical Details

### 實作位置
`static/src/scss/portal.scss` - 更新現有 `.portal-entity-card` 區塊

### 樣式規格

```scss
// ========================================
// Portal Entity Card (升級)
// ========================================

.portal-entity-card {
  background: var(--portal-bg-card);
  color: var(--portal-text-primary);
  border: 1px solid var(--portal-border-color);
  border-radius: var(--portal-border-radius);
  padding: 1rem;
  box-shadow: var(--portal-shadow);
  transition:
    box-shadow var(--portal-transition-normal) ease,
    transform var(--portal-transition-normal) ease;

  &:hover {
    box-shadow: var(--portal-shadow-lg);
    transform: translateY(-4px);
  }

  // Header 區塊
  .card-header-section {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
    padding-bottom: 0.75rem;
    border-bottom: 1px solid var(--portal-border-color);
  }

  .entity-name {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
    color: var(--portal-text-primary);
    display: flex;
    align-items: center;
    gap: 0.5rem;

    // 設備類型圖示
    .entity-icon {
      font-size: 1.25rem;
      color: var(--portal-accent-primary);
    }
  }

  // Entity ID 區塊
  .entity-id {
    margin-bottom: 0.75rem;

    code {
      background: var(--portal-bg-secondary);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-size: 0.8rem;
      color: var(--portal-text-secondary);
    }
  }

  // 狀態 Badge
  .entity-state {
    margin-bottom: 0.75rem;
  }

  // 控制器區塊
  .entity-controller {
    margin-bottom: 0.75rem;
    padding: 0.75rem 0;
    border-top: 1px solid var(--portal-border-color);
    border-bottom: 1px solid var(--portal-border-color);
  }

  // Footer 區塊
  .entity-updated {
    margin-top: auto;
    font-size: 0.8rem;
    color: var(--portal-text-muted);
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }
}

// 狀態變化高亮（保留但使用主題變數）
.portal-state-changed {
  animation: portal-highlight 1s ease-out;
}

@keyframes portal-highlight {
  0% {
    background-color: var(--portal-accent-warning);
    opacity: 0.3;
  }
  100% {
    background-color: transparent;
    opacity: 1;
  }
}
```

### 設計參考
- 圓角: 12px（與 Home Assistant Tile Card 一致）
- Hover lift: translateY(-4px)
- 陰影層次: shadow → shadow-lg

## Dependencies

- [ ] Task 001: CSS Custom Properties 必須先完成
- [ ] 現有 `.portal-entity-card` 結構維持不變

## Effort Estimate

- Size: S
- Hours: 2
- Parallel: true（與 003, 004, 005 可平行但 conflicts_with）

## Definition of Done

- [ ] 卡片樣式使用 CSS 變數
- [ ] Hover 效果流暢
- [ ] 深色模式視覺正確
- [ ] 與現有 OWL 模板結構相容
- [ ] 無視覺回歸
