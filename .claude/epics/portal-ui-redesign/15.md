---
name: 優化 Value Slider 樣式
status: closed
created: 2026-01-08T17:23:27Z
updated: 2026-01-09T01:57:56Z
github: https://github.com/WOOWTECH/odoo-addons/issues/15
depends_on: [12]
parallel: true
conflicts_with: [002, 003, 005]
---

# Task: 優化 Value Slider 樣式

## Description

升級亮度、風速、窗簾位置等數值滑桿的視覺設計，包括自訂 track、thumb 樣式，以及即時數值顯示的 Badge。

## Acceptance Criteria

- [ ] 滑桿 track 使用主題色彩
- [ ] 滑桿 thumb 有明顯的拖動把手
- [ ] 數值 Badge 顯示在滑桿上方或旁邊
- [ ] 拖動時有視覺反饋
- [ ] 深色模式視覺正確
- [ ] 跨瀏覽器相容（Chrome/Firefox/Safari）

## Technical Details

### 實作位置
`static/src/scss/portal.scss` - 新增 Value Slider 區塊

### 樣式規格

```scss
// ========================================
// Value Slider (亮度/風速/位置)
// ========================================

.portal-value-slider {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;

  // 標籤列
  .slider-label {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 0.9rem;
    color: var(--portal-text-secondary);

    .slider-icon {
      margin-right: 0.5rem;
      color: var(--portal-accent-primary);
    }

    .slider-value-badge {
      background-color: var(--portal-bg-secondary);
      color: var(--portal-text-primary);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
      font-weight: 600;
      font-size: 0.85rem;
      min-width: 3rem;
      text-align: center;
    }
  }

  // 滑桿容器
  .slider-track-container {
    position: relative;
    width: 100%;
    height: 40px;
    display: flex;
    align-items: center;
  }

  // 自訂滑桿樣式
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 8px;
    background: var(--portal-bg-secondary);
    border-radius: 4px;
    outline: none;
    cursor: pointer;
    transition: background var(--portal-transition-fast) ease;

    // WebKit (Chrome/Safari) Track
    &::-webkit-slider-runnable-track {
      height: 8px;
      background: linear-gradient(
        to right,
        var(--portal-accent-primary) 0%,
        var(--portal-accent-primary) var(--slider-progress, 50%),
        var(--portal-bg-secondary) var(--slider-progress, 50%),
        var(--portal-bg-secondary) 100%
      );
      border-radius: 4px;
    }

    // WebKit Thumb
    &::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      background: var(--portal-bg-card);
      border: 3px solid var(--portal-accent-primary);
      border-radius: 50%;
      cursor: grab;
      box-shadow: var(--portal-shadow);
      transition:
        transform var(--portal-transition-fast) ease,
        box-shadow var(--portal-transition-fast) ease;

      &:hover {
        transform: scale(1.15);
        box-shadow: var(--portal-shadow-lg);
      }

      &:active {
        cursor: grabbing;
        transform: scale(1.1);
      }
    }

    // Firefox Track
    &::-moz-range-track {
      height: 8px;
      background: var(--portal-bg-secondary);
      border-radius: 4px;
    }

    // Firefox Progress (filled portion)
    &::-moz-range-progress {
      height: 8px;
      background: var(--portal-accent-primary);
      border-radius: 4px 0 0 4px;
    }

    // Firefox Thumb
    &::-moz-range-thumb {
      width: 24px;
      height: 24px;
      background: var(--portal-bg-card);
      border: 3px solid var(--portal-accent-primary);
      border-radius: 50%;
      cursor: grab;
      box-shadow: var(--portal-shadow);
    }

    // Disabled 狀態
    &:disabled {
      opacity: 0.5;
      cursor: not-allowed;

      &::-webkit-slider-thumb,
      &::-moz-range-thumb {
        cursor: not-allowed;
      }
    }
  }
}

// 特定控制器類型的滑桿變體
.portal-brightness-slider {
  input[type="range"] {
    &::-webkit-slider-runnable-track,
    &::-moz-range-progress {
      background: linear-gradient(
        to right,
        #374151 0%,
        #fbbf24 100%
      );
    }
  }
}

.portal-speed-slider {
  input[type="range"] {
    &::-webkit-slider-runnable-track,
    &::-moz-range-progress {
      background: var(--portal-accent-primary);
    }
  }
}
```

### 適用的控制器
- `PortalEntityController.Light` - 亮度滑桿
- `PortalEntityController.Fan` - 風速滑桿
- `PortalEntityController.Cover` - 窗簾位置滑桿
- `PortalEntityController.Climate` - 溫度調整（非滑桿但相關）

### JavaScript 注意事項
滑桿進度條的顏色填充需要透過 JS 設定 `--slider-progress` CSS 變數，或使用 Firefox 的 `::-moz-range-progress` 偽元素。現有 OWL 元件已有 `onBrightnessInput` 等方法，可考慮在那裡更新變數。

## Dependencies

- [ ] Task 001: CSS Custom Properties 必須先完成
- [ ] 現有 OWL 元件邏輯不需修改

## Effort Estimate

- Size: S
- Hours: 1.5
- Parallel: true

## Definition of Done

- [ ] 滑桿 track 樣式完成
- [ ] 滑桿 thumb 樣式完成
- [ ] 數值 Badge 顯示正確
- [ ] Chrome/Firefox/Safari 外觀一致
- [ ] 深色模式視覺正確
- [ ] 拖動體驗流暢
