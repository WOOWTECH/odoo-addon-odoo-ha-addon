---
name: 實作 CSS Custom Properties 主題系統
status: closed
created: 2026-01-08T17:23:27Z
updated: 2026-01-08T18:13:08Z
github: https://github.com/WOOWTECH/odoo-addons/issues/12
depends_on: []
parallel: false
conflicts_with: []
---

# Task: 實作 CSS Custom Properties 主題系統

## Description

在 `static/src/scss/portal.scss` 中建立 CSS Custom Properties（CSS 變數）主題系統，支援深色/淺色模式自動切換。這是所有後續樣式任務的基礎。

## Acceptance Criteria

- [ ] 定義完整的 CSS 變數集合（背景、文字、強調色、邊框、陰影）
- [ ] 淺色模式為預設（`:root` 層級）
- [ ] 深色模式透過 `@media (prefers-color-scheme: dark)` 覆蓋
- [ ] 所有顏色組合符合 WCAG AA 對比度標準（≥4.5:1）
- [ ] 添加 `.portal-page` 容器類別供 QWeb 模板使用

## Technical Details

### 實作位置
`static/src/scss/portal.scss` - 在檔案頂部新增主題變數區塊

### CSS 變數定義

```scss
// ========================================
// Theme Variables (CSS Custom Properties)
// ========================================

// 淺色模式（預設）
:root {
  // 背景色
  --portal-bg-primary: #f8f9fa;
  --portal-bg-secondary: #e9ecef;
  --portal-bg-card: #ffffff;

  // 文字色
  --portal-text-primary: #1f2937;
  --portal-text-secondary: #6b7280;
  --portal-text-muted: #9ca3af;

  // 強調色
  --portal-accent-primary: #3b82f6;
  --portal-accent-success: #10b981;
  --portal-accent-warning: #f59e0b;
  --portal-accent-danger: #ef4444;

  // 邊框和陰影
  --portal-border-color: rgba(0, 0, 0, 0.1);
  --portal-border-radius: 12px;
  --portal-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  --portal-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);

  // 過渡時間
  --portal-transition-fast: 150ms;
  --portal-transition-normal: 300ms;
}

// 深色模式覆蓋
@media (prefers-color-scheme: dark) {
  :root {
    --portal-bg-primary: #1a1a2e;
    --portal-bg-secondary: #16213e;
    --portal-bg-card: #0f3460;

    --portal-text-primary: #e4e4e7;
    --portal-text-secondary: #a1a1aa;
    --portal-text-muted: #71717a;

    --portal-accent-primary: #00d9ff;

    --portal-border-color: rgba(255, 255, 255, 0.1);
    --portal-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
    --portal-shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
  }
}

// Portal 頁面容器
.portal-page {
  background-color: var(--portal-bg-primary);
  color: var(--portal-text-primary);
  min-height: 100vh;
}
```

### 對比度驗證表

| 組合 | 淺色模式 | 深色模式 | 目標 |
|------|----------|----------|------|
| text-primary on bg-primary | #1f2937 on #f8f9fa (13.1:1) | #e4e4e7 on #1a1a2e (11.2:1) | ≥4.5:1 ✓ |
| text-secondary on bg-card | #6b7280 on #ffffff (5.1:1) | #a1a1aa on #0f3460 (5.8:1) | ≥4.5:1 ✓ |
| accent-success on bg-card | #10b981 on #ffffff (3.5:1) | #10b981 on #0f3460 (6.9:1) | ≥3:1 (UI) ✓ |

## Dependencies

- [ ] 無前置任務依賴
- [ ] 需要 Odoo SCSS 編譯流程正常運作

## Effort Estimate

- Size: S
- Hours: 2
- Parallel: false（其他任務依賴此任務）

## Definition of Done

- [ ] CSS Custom Properties 在 portal.scss 中定義
- [ ] 淺色模式配色完整
- [ ] 深色模式配色完整
- [ ] prefers-color-scheme 媒體查詢正確運作
- [ ] .portal-page 容器類別可用
- [ ] 瀏覽器 DevTools 中可檢查變數值
- [ ] 無 SCSS 編譯錯誤
