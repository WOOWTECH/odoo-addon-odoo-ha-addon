---
name: 響應式斷點微調和觸控目標優化
status: closed
created: 2026-01-08T17:23:27Z
updated: 2026-01-09T05:51:25Z
github: https://github.com/WOOWTECH/odoo-addons/issues/19
depends_on: [13, 14, 15]
parallel: true
conflicts_with: []
---

# Task: 響應式斷點微調和觸控目標優化

## Description

調整響應式斷點確保在手機、平板、桌面設備上的最佳顯示效果，並確保所有互動元素符合 48x48px 最小觸控目標尺寸。

## Acceptance Criteria

- [ ] 手機 (<576px): 單欄佈局，卡片間距 12px
- [ ] 平板 (576-992px): 雙欄佈局，卡片間距 16px
- [ ] 桌面 (>992px): 3-4 欄佈局，卡片間距 16-24px
- [ ] 所有按鈕、開關觸控區域 ≥ 48x48px
- [ ] 滑桿拖動把手 ≥ 44px
- [ ] 文字在小螢幕上可讀（最小 14px）

## Technical Details

### 實作位置
`static/src/scss/portal.scss` - 更新現有 Responsive 區塊

### 樣式規格

```scss
// ========================================
// Responsive Breakpoints
// ========================================

// 桌面（預設）- 3-4 欄
.portal-entity-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.5rem;
}

// 大螢幕（>1200px）- 限制最大欄數
@media (min-width: 1200px) {
  .portal-entity-grid {
    grid-template-columns: repeat(4, 1fr);
    max-width: 1200px;
    margin: 0 auto;
  }
}

// 平板（576-992px）- 2 欄
@media (max-width: 992px) {
  .portal-entity-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }

  .portal-entity-card {
    padding: 0.875rem;
  }

  // 調整字體大小
  .entity-name {
    font-size: 0.9rem;
  }

  .sensor-value {
    font-size: 2rem;
  }
}

// 手機（<576px）- 單欄
@media (max-width: 576px) {
  .portal-entity-grid {
    grid-template-columns: 1fr;
    gap: 0.75rem;
  }

  .portal-entity-card {
    padding: 0.75rem;
    border-radius: 8px;
  }

  // 文字調整
  .entity-name {
    font-size: 0.875rem;
  }

  .entity-id code {
    font-size: 0.7rem;
    word-break: break-all;
  }

  .sensor-value {
    font-size: 1.75rem;
  }

  .sensor-unit {
    font-size: 1rem;
  }

  // 控制器調整
  .portal-iot-toggle {
    flex-wrap: wrap;

    .toggle-button {
      flex: 1;
      min-width: 100px;
    }
  }

  // 滑桿調整
  .portal-value-slider {
    .slider-label {
      flex-wrap: wrap;
      gap: 0.5rem;
    }
  }

  // 統計卡片調整
  .portal-group-info .display-4 {
    font-size: 1.75rem;
  }
}

// ========================================
// Touch Target Optimization
// ========================================

// 確保所有互動元素最小 48x48px
.portal-touch-target {
  min-width: 48px;
  min-height: 48px;
  padding: 12px;
}

// 按鈕觸控區域
.portal-iot-toggle .toggle-button {
  min-width: 80px;
  min-height: 48px;
  padding: 0.75rem 1rem;
}

// 滑動開關觸控區域
.form-switch .form-check-input {
  min-width: 56px;
  min-height: 28px;
  cursor: pointer;

  // 增加隱形觸控區域
  &::before {
    content: '';
    position: absolute;
    inset: -10px;
  }
}

// 滑桿拖動把手
input[type="range"] {
  &::-webkit-slider-thumb {
    width: 28px;
    height: 28px;
    // 隱形觸控擴展
    box-shadow:
      var(--portal-shadow),
      0 0 0 10px transparent;
  }

  &::-moz-range-thumb {
    width: 28px;
    height: 28px;
  }
}

// 模式選擇按鈕
.btn-group .btn {
  min-height: 44px;
  padding: 0.5rem 0.75rem;
}

// 溫度 +/- 按鈕
.temperature-control .btn {
  min-width: 44px;
  min-height: 44px;
}

// ========================================
// Safe Area (iPhone X+)
// ========================================

@supports (padding: max(0px)) {
  .portal-page {
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
    padding-bottom: max(1rem, env(safe-area-inset-bottom));
  }
}

// ========================================
// Landscape Mode Adjustments
// ========================================

@media (orientation: landscape) and (max-height: 500px) {
  // 橫向模式下減少垂直間距
  .portal-entity-card {
    padding: 0.5rem 0.75rem;
  }

  .card-header-section {
    padding-bottom: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .sensor-value {
    font-size: 1.5rem;
  }
}
```

### 測試設備斷點

| 設備 | 寬度 | 欄數 | 測試工具 |
|------|------|------|----------|
| iPhone SE | 375px | 1 | DevTools |
| iPhone 14 | 390px | 1 | DevTools |
| iPad Mini | 768px | 2 | DevTools |
| iPad Pro | 1024px | 3 | DevTools |
| Desktop | 1440px | 4 | 實機 |

### 觸控目標檢查清單

- [ ] Toggle 按鈕: ≥ 48x48px
- [ ] 滑動開關: ≥ 56x28px
- [ ] 滑桿 thumb: ≥ 28x28px（含隱形區域 48x48px）
- [ ] 模式按鈕: ≥ 44px 高度
- [ ] 溫度 +/- 按鈕: ≥ 44x44px

## Dependencies

- [ ] Task 002: 卡片樣式定義
- [ ] Task 003: Toggle 樣式定義
- [ ] Task 004: Slider 樣式定義

## Effort Estimate

- Size: S
- Hours: 1
- Parallel: true

## Definition of Done

- [ ] 所有斷點正確運作
- [ ] 觸控目標 ≥ 48px
- [ ] 手機/平板/桌面視覺測試通過
- [ ] iPhone X+ Safe Area 支援
- [ ] 橫向模式可用
