---
name: 增強 Sensor 數值顯示元件
status: closed
created: 2026-01-08T17:23:27Z
updated: 2026-01-09T01:59:25Z
github: https://github.com/WOOWTECH/odoo-addons/issues/16
depends_on: [12]
parallel: true
conflicts_with: [002, 003, 004]
---

# Task: 增強 Sensor 數值顯示元件

## Description

優化感測器數值的視覺呈現，使用大字體數值、專業圖示、單位標籤，以及數值變化時的視覺過渡效果。

## Acceptance Criteria

- [ ] 數值使用大字體（2-3rem）顯示
- [ ] 根據 device_class 顯示對應圖示
- [ ] 單位標籤清晰顯示在數值旁
- [ ] 數值變化時有平滑過渡效果
- [ ] 深色模式視覺正確

## Technical Details

### 實作位置
`static/src/scss/portal.scss` - 新增 Sensor Display 區塊

### 樣式規格

```scss
// ========================================
// Sensor Display (感測器數值)
// ========================================

.portal-sensor-display {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 1rem;

  // 數值區塊
  .sensor-value-block {
    display: flex;
    align-items: baseline;
    gap: 0.25rem;

    .sensor-value {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--portal-text-primary);
      line-height: 1;
      transition: color var(--portal-transition-normal) ease;

      // 數值變化動畫
      &.value-changed {
        animation: portal-value-bounce 0.5s ease;
      }
    }

    .sensor-unit {
      font-size: 1.25rem;
      color: var(--portal-text-secondary);
      font-weight: 500;
    }
  }

  // 圖示
  .sensor-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;

    // 根據 device_class 的顏色
    &.temperature {
      color: #ef4444; // 紅色 - 溫度
    }
    &.humidity {
      color: #3b82f6; // 藍色 - 濕度
    }
    &.power {
      color: #f59e0b; // 黃色 - 電力
    }
    &.motion {
      color: var(--portal-accent-success); // 綠色 - 動作
    }
    &.door, &.window {
      color: var(--portal-accent-primary); // 主色 - 門窗
    }
    &.battery {
      color: #10b981; // 綠色 - 電池

      &.low {
        color: #f59e0b; // 黃色 - 低電量
      }
      &.critical {
        color: #ef4444; // 紅色 - 極低
      }
    }
  }

  // Device Class Badge
  .sensor-device-class {
    margin-top: 0.5rem;
    padding: 0.25rem 0.75rem;
    background: var(--portal-bg-secondary);
    color: var(--portal-text-secondary);
    border-radius: 9999px;
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  // 說明文字
  .sensor-readonly-notice {
    margin-top: 0.75rem;
    font-size: 0.8rem;
    color: var(--portal-text-muted);
    display: flex;
    align-items: center;
    gap: 0.25rem;

    i {
      font-size: 0.9rem;
    }
  }
}

// 二進制感測器（開/關狀態）
.portal-binary-sensor {
  .sensor-state {
    display: flex;
    align-items: center;
    gap: 0.75rem;

    .state-icon {
      font-size: 2rem;
      transition: color var(--portal-transition-normal) ease;

      &.is-on {
        color: var(--portal-accent-success);
      }
      &.is-off {
        color: var(--portal-text-muted);
      }
    }

    .state-text {
      font-size: 1.5rem;
      font-weight: 600;
      color: var(--portal-text-primary);
    }
  }
}

// 數值跳動動畫
@keyframes portal-value-bounce {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}
```

### 圖示對照表

| device_class | FA 4.x 圖示 | CSS 類別 |
|--------------|-------------|----------|
| temperature | fa-thermometer-half | .temperature |
| humidity | fa-tint | .humidity |
| power | fa-bolt | .power |
| motion | fa-walking | .motion |
| door | fa-door-open (無) → fa-sign-out | .door |
| window | fa-window-restore | .window |
| battery | fa-battery-full/half/quarter/empty | .battery |
| illuminance | fa-sun-o | .illuminance |

### 適用的控制器
- `PortalEntityController.Sensor` - 主要感測器顯示
- 部分二進制感測器（door、window、motion）

## Dependencies

- [ ] Task 001: CSS Custom Properties 必須先完成

## Effort Estimate

- Size: S
- Hours: 1
- Parallel: true

## Definition of Done

- [ ] 數值顯示樣式完成
- [ ] 圖示根據 device_class 正確顯示
- [ ] 單位標籤位置正確
- [ ] 數值變化動畫流暢
- [ ] 深色模式視覺正確
- [ ] 二進制感測器狀態顯示正確
