---
name: 更新 Model 層
status: open
created: 2026-01-17T18:30:35Z
updated: 2026-01-17T18:38:39Z
github: https://github.com/WOOWTECH/odoo-addons/issues/55
depends_on: []
parallel: true
conflicts_with: []
---

# Task: 更新 Model 層

## Description

從 `ha.entity` 和 `ha.entity_group` 模型中移除 `portal.mixin` 繼承和 `action_share_portal()` 方法。保留 `action_share()` 方法（user-based sharing）。

## Acceptance Criteria

- [ ] `models/ha_entity.py` 移除 `'portal.mixin'` 從 `_inherit` 列表
- [ ] `models/ha_entity.py` 移除 `action_share_portal()` 方法
- [ ] `models/ha_entity_group.py` 移除 `'portal.mixin'` 從 `_inherit` 列表
- [ ] `models/ha_entity_group.py` 移除 `action_share_portal()` 方法
- [ ] 確認 `action_share()` 方法保留

## Technical Details

### ha_entity.py 修改

**Line 13 - 移除 portal.mixin**：
```python
# Before
_inherit = ['ha.current.instance.filter.mixin', 'mail.thread', 'mail.activity.mixin', 'portal.mixin']

# After
_inherit = ['ha.current.instance.filter.mixin', 'mail.thread', 'mail.activity.mixin']
```

**Line 925-944 - 移除整個方法**：
```python
# 刪除整個 action_share_portal() 方法
def action_share_portal(self):
    ...
```

### ha_entity_group.py 修改

**Line 11 - 移除 portal.mixin**：
```python
# Before
_inherit = ['ha.current.instance.filter.mixin', 'mail.thread', 'mail.activity.mixin', 'portal.mixin']

# After
_inherit = ['ha.current.instance.filter.mixin', 'mail.thread', 'mail.activity.mixin']
```

**Line 211+ - 移除整個方法**：
```python
# 刪除整個 action_share_portal() 方法
def action_share_portal(self):
    ...
```

## Effort Estimate

- Size: XS
- Hours: 0.15
- Parallel: true

## Definition of Done

- [ ] portal.mixin 從兩個模型移除
- [ ] action_share_portal() 從兩個模型移除
- [ ] action_share() 保留且未修改
- [ ] 無 Python 語法錯誤
